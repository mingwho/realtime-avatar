# Docker Compose Override for Local Development (M3 Mac - No NVIDIA GPU)
# This file automatically overrides docker-compose.yml settings when running locally
# For GCP deployment, rename this file or use: docker-compose -f docker-compose.yml up

services:
  gpu-service:
    # Remove GPU device requirements entirely - use CPU/MPS instead
    deploy:
      resources:
        reservations:
          devices: []
    # Ensure CPU path (no CUDA) when running locally
    environment:
      - USE_CUDA=false

  runtime:
    # Point runtime to native GPU service on host
    environment:
      - GPU_SERVICE_URL=http://host.docker.internal:8001
    # Remove dependency on containerized gpu-service
    depends_on: null

